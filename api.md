(Пример описания API)

Инструкция по приёму платежей
с новой функциональностью API ЮKassa

# Пожертвования

API ЮKassa позволяет вместе с платежом перечислять пожертвования в партнёрский благотворительный фонд Деда Мороза «Волшебная ёлка». Фонд высаживает еловые леса, чтобы сохранить численность деревьев.

 ## Необходимые условия

Чтобы начать работу, вам нужно [зарегистрироваться](https://yookassa.ru/yooid/signin/step/login?contextId=UACB_CAC_551bd774-6d87-4f91-a07a-6ff59247221e) и получить доступ к личному кабинету. Для [аутентификации запросов](https://yookassa.ru/developers/using-api/basics#auth) запросов в API вам потребуется секретный ключ и идентификатор магазина из личного кабинета.
Функциональность доступна только при оплате банковской картой на стороне ЮKassa.

## Использование API

### Шаг 1.
Создайте [платёж](https://yookassa.ru/developers/api#create_payment). В запросе передайте объект `confirmation` с типом `redirect` и адресом страницы, на которую вернется пользователь после оплаты. (Данные о способе оплаты - `payment_method_data`, `payment_token`, `payment_method_id` - передавать не нужно).

В запросе также передайте параметр `capture` со значением `false`. В этом случае платёж пройдёт в две стадии: нужная сумма заблокируется на счете пользователя, затем вы сможете списать замороженные средства по своему запросу.

Чтобы принять платеж с пожертвованием, в запросе нужно дополнительно
передать объект `charity`. Этот же объект вернется в объекте платежа.

Описание параметров
Параметр | Тип | Описание
-------------|------|---------------
charity | object, required | Сопутствующие денежные перечисления на благотворительность
charity.type | string, required | Благотворительный фонд "Волшебная ёлка" - christmas_tree
charity.donator | string, optional | Имя пользователя, сделавшего взнос (для публикации на сайте фонда). Вы можете не передавать эту строку, в этом случае платёж останется анонимным
сharity.donation | object, required | Данные о пожертвовании
charity.donation.type | string, required | Данные о типе пожертвования. Что выбрал пользователь: произвольная сумма или фиксированная стоимость дерева. Возможные значения: money, tree
charity.donation.quantity | number, optional | Количество деревьев (если выбран тип  tree). Возможные значения: положительное целое число
charity.donation.amount | object, required | Сумма пожертвования. Если выбран тип tree, расчет производится на основании переданного quantity, исходя из стоимости одного дерева в размере 100 рублей
charity.donation.amount.value | string, required | Сумма в выбранной валюте. Выражается в виде строки и пишется через точку, например, 10.00. Количество знаков после точки зависит от выбранной валюты.
charity.donation.amount.currency | string, required | Код валюты в формате ISO-4217, например, RUB


### Шаг 2. 
Перенаправьте пользователя на страницу ЮKassa. Адрес будет указан в `confirmation_url` в объекте платежа. На странице Юkassa пользователь выберет нужный способ и введет данные для оплаты.

Пример созданного объекта `charity`

![](https://raw.githubusercontent.com/Litulyagan/Test_TW_Doc/main/code.bmp)

 Шаг 3. После того как платеж перейдет в статус `waiting_for_capture`, [спишите](https://yookassa.ru/developers/payments/payment-process#capture) оплату.
